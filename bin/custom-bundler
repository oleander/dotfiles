#!/usr/bin/env ruby

# Bundle Custom, version 1.0, 2012-01-19
# Copyright (c) 2011, Linus Oleander
# Released under the MIT licens

# Makes it possible to run:
# => bundle install && 
# git add Gemfile Gemfile.lock &&
# git commit -m "Message"

require "colorize"
require "optparse"

unless File.exist?("Gemfile")
  abort "No Gemfile found".red
end

options = {}

optparse = OptionParser.new do |opts|
  options[:hard] = false
  opts.on( '-h', '--hard', 'Removing Gemfile.lock') do
    options[:hard] = true
  end
end

optparse.parse!

system "rm -f Gemfile.lock" if options[:hard]

abort unless system "bundle install"
