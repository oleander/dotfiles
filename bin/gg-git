#!/usr/bin/env ruby -w
files = `git status --porcelain`.split("\n").map{|raw| raw.split(" ").last }.select {|file| (File.new(file).size / (10**6).to_f) > 0.2}

if files.any?
  puts "#{files.count} large file(s) found."
  puts files.join(", ")
  puts "Continue?"
  con = true if STDIN.gets =~ /y/
else
  con = true
end

if con
  `git add . && git commit -v -a -m "#{ARGV.first}"`
end
