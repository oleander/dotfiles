- defaults:
    link:
      relink: true
      create: true
      force: false
    shell:
      stdout: true
      stderr: true
      stdin: false

- create:
    - ~/.cache
    - ~/.local/bin
    - ~/.config/cargo
    - ~/.local/state
    - ~/.local/bin/inst
    - ~/.local/share/zinit
    - ~/.local/share/nvim/site/autoload

- create:
    ~/.ssh:
      mode: 0700

- clean: ["~", "~/.local/bin/inst"]

- link:
    ~/.dotfiles:
      relative: true
      force: true
      path: .
    ~/:
      prefix: .
      glob: true
      path: configs/*
      exclude: [configs/config]
      force: true
    ~/.config:
      glob: true
      path: configs/config/**

- link:
    ~/.local/bin:
      if: test $OS = "macos"
      path: inst/macos/*
      glob: true
      force: true
      relink: true
      prefix: inst-

- link:
    ~/.local/bin:
      if: test $OS = "linux"
      path: inst/linux/*
      glob: true
      force: true
      relink: true
      prefix: inst-

- shell:
    - [~/.local/bin/inst-brew, Installing homebrew]
    - [~/.local/bin/inst-zsh, Installing zsh]
    - [~/.local/bin/inst-rust, Installing rust]
    - [~/.local/bin/inst-oh-my-zsh, Installing oh-my-zsh]
    - [~/.local/bin/inst-git-ai, Installing git-ai]
